{% extends "base.html" %}
{% block title %}Order Details{% endblock title %}

{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static "cart/order_detail.css" %}">
{% endblock extra_head %}

{% block body %}
<div class="checkout-container">
    <div class="checkout-content">
        <!-- Left Section - Order Details -->
        <div class="order-details-section">
            <!-- Order Review Header -->
            <div class="order-header">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 11l3 3L22 4"/><path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <h1 class="header-title">Order Review</h1>
            </div>

            <!-- Shipping Information -->
            <div class="info-section">
                <h2 class="section-title">Shipping Information</h2>
                
                <div class="shipping-info">
                    <p class="info-text name">{{ order.user.first_name }} {{ order.user.last_name }}</p>
                    <p class="info-text">{{ order.user.email }}</p>
                    <p class="info-text">{{ order.user.address }}</p>
                    <p class="info-text">{{ order.user.city }}, {{ order.user.state|default:"" }} {{ order.user.postal_code|default:"" }}</p>
                    <p class="info-text">{{ order.user.phone_number }}</p>
                </div>
                <a href="#" class="edit-link">Edit</a>
            </div>

            <!-- Payment Method -->
            <div class="info-section">
                <h2 class="section-title">Payment Method</h2>
                <p class="payment-method-text">Credit / Debit Card (Stripe)</p>
                <a href="#" class="edit-link">Edit</a>
            </div>

            <!-- Order Items -->
            <div class="info-section">
                <h2 class="section-title">Order Items</h2>
                
                <div class="order-items-list">
                    {% for item in order_items %}
                    <div class="order-item">
                        <div class="item-image">
                            <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                        </div>
                        <div class="item-info">
                            <h3 class="item-title">{{ item.product.name }}</h3>
                            <p class="item-qty">Quantity: {{ item.quantity }}</p>
                        </div>
                        <div class="item-price">PKR {{ item.price }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <a href="{% url 'checkout' %}" class="btn-back">Back</a>
                <button class="btn-place-order">Place Order</button>
            </div>
        </div>

        <!-- Right Section - Order Summary -->
        <div class="order-summary-section">
            <h2 class="summary-title">Order Summary</h2>
            
            <div class="summary-items">
                {% for item in order_items %}
                <div class="summary-item">
                    <span class="item-name">{{ item.product.name }} x{{ item.quantity }}</span>
                    <span class="item-price">PKR {{ item.price }}</span>
                </div>
                {% endfor %}
            </div>

            <div class="summary-divider"></div>

            <div class="summary-row">
                <span>Subtotal</span>
                <span class="summary-value">PKR {{ order.total_price }}</span>
            </div>

            <div class="summary-row">
                <span>Tax (8%)</span>
                <span class="summary-value">PKR {{ order.total_price|add:0|add:0 }}</span>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-total">
                <span>Total</span>
                <span class="total-amount">PKR {{ order.total_price }}</span>
            </div>
        </div>
    </div>
</div>

<script>
    document.querySelector('.btn-place-order').addEventListener('click', function() {
        alert('Order placed successfully!');
        window.location.href = "{% url 'home' %}";
    });
</script>
{% endblock body %}